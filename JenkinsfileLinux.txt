pipeline {
    agent {label 'linux'}
    stages {
        stage('commit'){
             steps{
                echo 'hello world3'
            }
               
        }
        stage('test'){
           
            steps {
               
                sh """pabot --processes 4 --listener allure_robotframework:allure-results --outputdir test_result Login_chrome.robot"""
                sh """allure generate allure-results --clean -o allure-report"""
            }        

            
            
        }
        stage('check test status'){
            steps{
              script {
                    // Mark build as unstable if the previous stage fails
                    if (currentBuild.result == 'UNSTABLE') {
                        error 'Stopping the pipeline because the build is unstable.'
                    }
                }
         
            }
        }   
       
        
        stage('deploy'){
            steps{
                echo 'hello world3'
            }
        }
    }
    
}
